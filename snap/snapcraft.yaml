name: mumble
version: '1.3.0-dev'
summary: Mumble is an open source, low-latency, high quality voice chat software. # 79 char long summary
description: |
  Mumble is a voice chat application for groups. While it can be used for any
  kind   of activity, it is primarily intended for gaming. It can be compared
  to programs like Ventrilo or TeamSpeak. People tend to simplify things, so
  when they talk   about Mumble they either talk about "Mumble" the client
  application or about "Mumble & Murmur" the whole voice chat application suite.

grade: stable
confinement: strict

apps:
  mumble:
    command: desktop-launch $SNAP/bin/mumble
    plugs:
      - network
      - pulseaudio
      - desktop
      - desktop-legacy
      - x11
      - unity7
      - home
      
parts:
  mumble:
    after: [desktop-qt5]
    plugin: qmake
    source: https://github.com/mumble-voip/mumble.git
#    source-tag: 1.2.19
    qt-version: qt5
    options:
      - CONFIG+=no-server -recursive no-update packaged
    install: |
      mkdir $SNAPCRAFT_PART_INSTALL/bin
      cp -R release/* $SNAPCRAFT_PART_INSTALL/bin
    build-packages:
      - qt5-default
      - qttools5-dev-tools
      - libqt5svg5-dev
      - libqt5opengl5-dev
      - libgl1-mesa-dev
      - libasound2-dev
      - libpulse-dev
      - libogg-dev
      - libspeex-dev
      - libspeexdsp-dev
      - libopus-dev
      - libsndfile1-dev
      - libssl-dev
      - libzeroc-ice35-dev
      - ice35-translators
      - ice35-slice
      - libg15daemon-client-dev
      - libspeechd-dev
      - protobuf-compiler
      - libprotobuf-dev
      - libavahi-compat-libdnssd-dev
      - libxi-dev
      - libcap-dev 
    stage-packages:
      - libavahi-compat-libdnssd1
      - libg15daemon-client1
      - libqt5sql5-sqlite
      - libgtk2.0-0
